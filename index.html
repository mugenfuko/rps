<!DOCTYPE HTML>
<html>    
    <head>
        <meta charset="UTF-8"/>
    </head>
    <body>
        <button onclick='game()'>Jankenpon!</button>
        <div class='output'></div>
    </body>
    <script>               
        function computerPlay() {
            let x = Math.floor(Math.random() * 3)
            switch (x) {
                case 0:
                    return 'Rock'
                    break;
                case 1:
                    return 'Paper'
                    break;
                case 2:
                    return 'Scissors'
                    break;
            }
        }
        
        function game() {
            output.innerHTML = ' ';
            function playRound(playerSelection, computerSelection) {
                
                playerSelectionNeutral = playerSelection.toLowerCase()

                switch (playerSelectionNeutral) {
                    case 'rock':
                        playerSelectionNeutral = 'Rock'
                        return rockRound()
                        break;
                    case 'paper':
                        playerSelectionNeutral = 'Paper'
                        return paperRound()
                        break;
                    case 'scissors':
                        playerSelectionNeutral = 'Scissors'
                        return scissorsRound()
                        break;
                    default:
                        playerSelection = prompt('That is not a valid move.')
                        return playRound(playerSelection, computerSelection)
                        break;
                }

                function rockRound() {
                    if (computerSelection === 'Scissors') {
                        return win()
                    }   else if (computerSelection === 'Paper') {
                        return lose()
                    }   else if (computerSelection === 'Rock') {
                        return tie()
                    }
                }
                
                function paperRound() {
                    if (computerSelection === 'Rock') {
                        return win()
                    }   else if (computerSelection === 'Scissors') {
                        return lose()
                    }   else if (computerSelection === 'Paper'){
                        return tie()
                    }
                }
                
                function scissorsRound() {
                    if (computerSelection === 'Paper') {
                        return win()
                    }   else if (computerSelection === 'Rock') {
                        return lose()
                    }   else if (computerSelection === 'Scissors') {
                        return tie()
                    }
                }

                function win() {
                    playerScore += 1        
                    const para = document.createElement('p');  
                    para.textContent = 'Round ' + round + ': ' + 'You Win! ' + playerSelectionNeutral + ' beats ' + computerSelection ;
                    output.appendChild(para);
                }

                function lose() {
                    computerScore += 1
                    const para = document.createElement('p');  
                    para.textContent = 'Round ' + round + ': ' + 'You Lose! ' + computerSelection + ' beats ' + playerSelectionNeutral ;
                    output.appendChild(para);
                }

                function tie() {
                    const para = document.createElement('p');  
                    para.textContent = 'Round ' + round + ': ' + 'You Tied! ' ;
                    output.appendChild(para);
                }
            }
            
            function result() {
                if (playerScore > computerScore) {
                    playerScore = 0
                    computerScore = 0
                    const para = document.createElement('p');  
                    para.textContent = 'You have Won the Game!' ;
                    output.appendChild(para);
                }   else if (computerScore > playerScore) {
                    playerScore = 0
                    computerScore = 0
                    const para = document.createElement('p');  
                    para.textContent = 'You have Lost the Game!' ;
                    output.appendChild(para);
                }   else {
                    playerScore = 0
                    computerScore = 0
                    const para = document.createElement('p');  
                    para.textContent = 'This Game was a Tie!' ;
                    output.appendChild(para);
                }
            }
            let round = 0
            while (round <= 5) {
                if (round < 5) {
                    round++
                    computerSelection = computerPlay()
                    playerSelection = prompt('Rock, paper, or scissors?')
                    playRound(playerSelection, computerSelection)
                }   else if (round == 5) {
                    result()
                    round++
                }
            }
        }
        
        let computerSelection = computerPlay()
        let playerScore = 0
        let computerScore = 0
        let output = document.querySelector('.output');
        output.innerHTML = ' ';
    </script>
</html>